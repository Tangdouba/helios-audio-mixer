!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("audioMixer",[],t):"object"==typeof exports?exports.audioMixer=t():e.audioMixer=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=2)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var u=Object.getPrototypeOf(t);return null===u?void 0:e(u,n,r)}if("value"in o)return o.value;var i=o.get;if(void 0!==i)return i.call(r)},c=n(4),f=r(c),s=n(1),p=r(s),v=function(e){function t(e){o(this,t);var n=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r=n,i={id:"",src:"",volume:1,start:0,loop:!1,autoplay:!1};if(r.options=Object.assign(i,e),!r.options.src)throw new Error("Can’t create an Html5Track without a src parameter");return r.el=document.createElement("audio"),r.el.volume=r.options.volume,r.el.loop=r.options.loop,r.el.autoplay=r.options.autoplay,r.el.src=r.options.src,["loadstart","loadedmetadata","canplay","canplaythrough","play","pause","ended","timeupdate","seeking","seeked","error"].forEach(function(e){r.el.addEventListener(e,l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"trigger",n).bind(r,e,!1))}),n}return i(t,e),a(t,[{key:"play",value:function(){return this.el.play(),this}},{key:"pause",value:function(){return this.el.pause(),this}},{key:"stop",value:function(){return this.el.pause(),this.el.currentTime=0,this}},{key:"currentTime",value:function(e){var t=this;return"number"==typeof e?(t.el.currentTime=e,t):t.el.currentTime}},{key:"duration",value:function(){return track.el.duration}},{key:"formattedTime",value:function(e){var t=this;return e?p.default.timeFormat(t.currentTime())+"/"+p.default.timeFormat(t.duration()):p.default.timeFormat(t.currentTime())}},{key:"volume",value:function(e){var t=this;return"number"==typeof e?(t.el.volume=p.default.normalize(e),t):t.el.volume}},{key:"tweenVolume",value:function(e,t){var n=this;return n.volumeTween&&window.cancelAnimationFrame(n.volumeTween),new Promise(function(r,o){function u(){a<=0?(n.volume(c),r(n)):n.volumeTween=window.requestAnimationFrame(u),a-=1;var e=1-a/i,t=p.default.lerp(l,c,e);n.volume(t)}var i=Math.round(60*t),a=Math.round(60*t),l=n.volume(),c=p.default.normalize(e);u()})}}]),t}(f.default);t.default=v},function(e,t,n){"use strict";function r(e){return e>1?1:e<0?0:e}function o(e){var t=Math.floor(e/60)<10?"0"+Math.floor(e/60):Math.floor(e/60);return t+":"+(Math.floor(e-60*t)<10?"0"+Math.floor(e-60*t):Math.floor(e-60*t))}function u(e,t,n){return(1-n)*e+n*t}Object.defineProperty(t,"__esModule",{value:!0}),t.default={normalize:r,timeFormat:o,lerp:u}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),u=r(o),i=n(0),a=r(i);t.default={Mixer:u.default,Html5Track:a.default}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),l=r(a),c=n(1),f=r(c),s=function(){function e(){o(this,e);var t=this;t.allTracks=[],t.lookup={},t.currentVolume=1,window.AudioContext&&(this.context="function"==typeof window.AudioContext?new window.AudioContext:new window.webkitAudioContext)}return i(e,[{key:"track",value:function(e,t){var n=this;if(!e)throw new Error("Can’t create a track without a name");if(n.lookup[e])return n.lookup[e];if(t){var r={id:e,timeline:[],context:n.context,type:l.default},o=Object.assign(r,t),u=new o.type(o);return n.allTracks.push(u),n.lookup[e]=u,u}return!1}},{key:"tracks",value:function(){return this.allTracks}},{key:"remove",value:function(e){var t=this,n=void 0;"string"==typeof e?n=e:"object"===(void 0===e?"undefined":u(e))&&e.id&&(n=e.id);for(var r=t.lookup[n],o=t.allTracks.length-1;o>=0;o--)t.allTracks[o]===r&&t.allTracks.splice(o,1);r.destroy&&r.destroy(),r=null,delete t.lookup[n]}},{key:"volume",value:function(e){var t=this;return"number"==typeof e&&(t.currentVolume=f.default.normalize(e),t.allTracks.forEach(function(e){return e.volume?e.volume(e.volume()):""})),t.currentVolume}}]),e}();t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(){function e(t){r(this,e),this.id=t.id,this.events={}}return o(e,[{key:"on",value:function(e,t){var n=this;if("string"!=typeof e)throw new Error("Event name must be a string.");if(!t)throw new Error("Can’t register an event without a callback.");return n.events[e]?n.events[e].push(t):n.events[e]=[t],n}},{key:"off",value:function(e,t){var n=this;if(t){if(n.events[e]){var r=n.events[e].indexOf(t);n.events[e].splice(r,1)}}else n.events[e]&&(n.events[e]=[]);return n}},{key:"one",value:function(e,t){var n=this,r=function r(){n.off(e,r),t()};return n.on(e,r),n}},{key:"trigger",value:function(e){var t=this;if(t.events[e]){var n=Array.prototype.slice.call(arguments,1);t.events[e].forEach(function(e){return e.apply(t,n)})}return t}},{key:"destroy",value:function(){}}]),e}();t.default=u}])});
//# sourceMappingURL=audioMixer.min.js.map
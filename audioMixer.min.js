!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("audioMixer",[],t):"object"==typeof exports?exports.audioMixer=t():e.audioMixer=t()}(this,function(){return function(e){function t(n){if(o[n])return o[n].exports;var r=o[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var o={};return t.m=e,t.c=o,t.d=function(e,o,n){t.o(e,o)||Object.defineProperty(e,o,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(o,"a",o),o},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=5)}([function(e,t,o){"use strict";function n(e){return e>1?1:e<0?0:e}function r(e){var t=Math.floor(e/60)<10?"0"+Math.floor(e/60):Math.floor(e/60);return t+":"+(Math.floor(e-60*t)<10?"0"+Math.floor(e-60*t):Math.floor(e-60*t))}function a(e,t,o){return(1-o)*e+o*t}e.exports={normalize:n,timeFormat:r,lerp:a}},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(9),a=n(r),u=o(10),i=n(u),l=o(11),c=n(l);t.default={GainNode:a.default,PannerNode2D:i.default,PannerNode:c.default}},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),l=function e(t,o,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,o);if(void 0===r){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,o,n)}if("value"in r)return r.value;var u=r.get;if(void 0!==u)return u.call(n)},c=o(3),s=n(c),f=o(0),p=n(f),d=function(e){function t(e){r(this,t);var o=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),n=o,u={id:"",src:"",volume:1,muted:!1,start:0,loop:!1,autoplay:!1};if(n.options=Object.assign(u,e),!n.options.src)throw new Error("Can’t create an Html5Track without a src parameter");return n.el=document.createElement("audio"),n.el.volume=n.options.volume,n.el.muted=n.options.muted,n.el.loop=n.options.loop,n.el.autoplay=n.options.autoplay,n.el.src=n.options.src,["loadstart","loadedmetadata","canplay","canplaythrough","play","pause","ended","timeupdate","seeking","seeked","error"].forEach(function(e){n.el.addEventListener(e,l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"trigger",o).bind(n,e,!1))}),o}return u(t,e),i(t,[{key:"play",value:function(){return this.el.play(),this}},{key:"pause",value:function(){return this.el.pause(),this}},{key:"stop",value:function(){return this.el.pause(),this.el.currentTime=0,this}},{key:"currentTime",value:function(e){var t=this;return"number"==typeof e?(t.el.currentTime=e,t):t.el.currentTime}},{key:"duration",value:function(){return this.el.duration}},{key:"formattedTime",value:function(e){var t=this;return e?p.default.timeFormat(t.currentTime())+"/"+p.default.timeFormat(t.duration()):p.default.timeFormat(t.currentTime())}},{key:"volume",value:function(e){var t=this;return"number"==typeof e?(t.el.volume=p.default.normalize(e),t):t.el.volume}},{key:"tweenVolume",value:function(e,t){var o=this;return o.volumeTween&&window.cancelAnimationFrame(o.volumeTween),new Promise(function(n,r){function a(){i<=0?(o.volume(c),n(o)):o.volumeTween=window.requestAnimationFrame(a),i-=1;var e=1-i/u,t=p.default.lerp(l,c,e);o.volume(t)}var u=Math.round(60*t),i=Math.round(60*t),l=o.volume(),c=p.default.normalize(e);a()})}},{key:"muted",value:function(e){var t=this;return"boolean"==typeof e&&(t.el.muted=e),t.el.muted}},{key:"paused",value:function(){return this.el.paused}},{key:"destroy",value:function(){this.pause()}}]),t}(s.default);e.exports=d},function(e,t,o){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),a=function(){function e(t){n(this,e),this.id=t.id,this.events={}}return r(e,[{key:"on",value:function(e,t){var o=this;if("string"!=typeof e)throw new Error("Event name must be a string.");if(!t)throw new Error("Can’t register an event without a callback.");return o.events[e]?o.events[e].push(t):o.events[e]=[t],o}},{key:"off",value:function(e,t){var o=this;if(t){if(o.events[e]){var n=o.events[e].indexOf(t);o.events[e].splice(n,1)}}else o.events[e]&&(o.events[e]=[]);return o}},{key:"one",value:function(e,t){var o=this,n=function n(){o.off(e,n),t()};return o.on(e,n),o}},{key:"trigger",value:function(e){var t=this;if(t.events[e]){var o=Array.prototype.slice.call(arguments,1);t.events[e].forEach(function(e){return e.apply(t,o)})}return t}},{key:"destroy",value:function(){}}]),e}();e.exports=a},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),c=o(3),s=n(c),f=o(0),p=(n(f),o(1)),d=n(p),y=function(e){function t(e){r(this,t);var o=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),n=o,u={src:"",context:!1,nodes:[]};return n.options=Object.assign(u,e),n.data={},n.allNodes=[],n.nodeLookup={},o}return u(t,e),l(t,[{key:"createNodes",value:function(e,t){var o=this;if(!t)throw new Error("Can’t create nodes without a valid source.");if(!t.connect)throw new Error("Can’t create nodes without a valid source.");o.allNodes=[];var n=t;e.forEach(function(e){var t={context:o.options.context};if("string"==typeof e){if(!d.default[e])throw new Error("Node type "+e+" does not exist.");var r=new d.default[e](t);o.allNodes.push(r),o.nodeLookup[e]=r,n.connect(r.node),n=r.node}else if("object"===(void 0===e?"undefined":i(e)))if(e.type){var a=d.default[e.type];if(!a)throw new Error("Node type "+e.type+" does not exist.");var u=new a(Object.assign(t,e.options));o.allNodes.push(u),o.nodeLookup[e.type]=u,n.connect(u.node),n=u.node}else e.connect&&(o.allNodes.push(e),n.connect(e),n=e)}),n.connect(o.options.context.destination)}},{key:"nodes",value:function(){return this.allNodes}},{key:"node",value:function(e){return this.nodeLookup[e]||!1}}]),t}(s.default);e.exports=y},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(6),a=n(r),u=o(2),i=n(u);t.default={Mixer:a.default,Html5Track:i.default}},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),i=o(7),l=n(i),c=o(0),s=n(c),f=function(){function e(){r(this,e);var t=this;t.allTracks=[],t.lookup={},t.currentVolume=1,(window.AudioContext||window.webkitAudioContext)&&(this.context="function"==typeof window.AudioContext?new window.AudioContext:new window.webkitAudioContext)}return u(e,[{key:"track",value:function(e,t){var o=this;if(!e)throw new Error("Can’t create a track without a name");if(o.lookup[e])return o.lookup[e];if(t){var n={id:e,timeline:[],mix:o,context:o.context,type:l.default.Html5Track},r=Object.assign(n,t);"string"==typeof r.type&&l.default[r.type]&&(r.type=l.default[r.type]);var a=new r.type(r);return o.allTracks.push(a),o.lookup[e]=a,a}return!1}},{key:"tracks",value:function(){return this.allTracks}},{key:"remove",value:function(e){var t=this,o=void 0;"string"==typeof e?o=e:"object"===(void 0===e?"undefined":a(e))&&e.id&&(o=e.id);for(var n=t.lookup[o],r=t.allTracks.length-1;r>=0;r--)t.allTracks[r]===n&&t.allTracks.splice(r,1);n.destroy&&n.destroy(),n=null,delete t.lookup[o]}},{key:"volume",value:function(e){var t=this;return"number"==typeof e&&(t.currentVolume=s.default.normalize(e),t.allTracks.forEach(function(e){return e.volume?e.volume(e.volume()):""})),t.currentVolume}}]),e}();e.exports=f},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(2),a=n(r),u=o(8),i=n(u),l=o(12),c=n(l);t.default={Html5Track:a.default,BufferSourceTrack:i.default,ElementSourceTrack:c.default}},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,o=Array(e.length);t<e.length;t++)o[t]=e[t];return o}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),s=function e(t,o,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,o);if(void 0===r){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,o,n)}if("value"in r)return r.value;var u=r.get;if(void 0!==u)return u.call(n)},f=o(4),p=n(f),d=o(0),y=n(d),v=o(1),m=(n(v),function(e){function t(e){a(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),n=o,r={id:"",src:"",volume:1,start:0,loop:!1,autoplay:!1,autoload:!0,context:!1,mix:!1,nodes:[]};if(n.options=Object.assign(r,e),n.status={ready:!1,shouldPlayOnLoad:!1,playing:!1,muted:n.options.muted||!1},n.data={gain:n.options.volume,cachedTime:0,startTime:0},!n.options.context)throw new Error("Can’t create a WebAudioTrack without Web Audio API support");if(!n.options.src)throw new Error("Can’t create a WebAudioTrack without a src parameter");return(n.options.autoload||n.options.autoplay)&&n.load(),o}return l(t,e),c(t,[{key:"play",value:function(){var e=this;if(e.status.playing)return e;if(!e.status.ready)return e.options.autoload||e.status.shouldPlayOnLoad||e.load(),e.status.shouldPlayOnLoad=!0,e;var o=e.options.context;e.data.source=o.createBufferSource(),e.data.source.buffer=e.data.decodedBuffer;var n={type:"GainNode",options:{gain:e.data.gain}};s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createNodes",this).call(this,[n].concat(r(e.options.nodes)),e.data.source),e.data.startTime=e.data.source.context.currentTime-e.data.cachedTime;var a=e.data.cachedTime||0;return"function"==typeof e.data.source.start?e.data.source.start(0,a):e.data.source.noteOn(a),e.setEndTimer(),e.status.playing=!0,s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"trigger",this).call(this,"play",e),e}},{key:"load",value:function(){var e=this,o=this,n=o.options.context;return s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"trigger",this).call(this,"loadstart"),window.fetch(o.options.src).then(function(e){return e.arrayBuffer()}).then(function(e){if(o.data.audioData=e,"function"==typeof n.createGain)return new Promise(function(t,r){n.decodeAudioData(e,function(e){o.data.decodedBuffer=e,t()})});if("function"==typeof n.createGainNode){var t=n.createBuffer(e,!0);return o.data.decodedBuffer=t,Promise.resolve()}}).then(function(){o.status.ready=!0,s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"trigger",e).call(e,"loadedmetadata"),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"trigger",e).call(e,"canplay"),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"trigger",e).call(e,"canplaythrough"),(o.options.autoplay||o.status.shouldPlayOnLoad)&&o.play()})}},{key:"setEndTimer",value:function(){var e=this,t=e.data.cachedTime||0;e.data.timerDuration=e.data.source.buffer.duration-t,e.data.onendtimer&&window.clearTimeout(e.data.onendtimer),e.data.onendtimer=window.setTimeout(e.ended.bind(e),1e3*e.data.timerDuration)}},{key:"ended",value:function(){var e=this;e.options.loop?(s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"trigger",this).call(this,"ended",e),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"trigger",this).call(this,"loop",e),e.pause(0),e.play()):(e.status.playing=!1,s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"trigger",this).call(this,"ended",e))}},{key:"pause",value:function(e){var o=this;return!o.status.playing&&o.status.shouldPlayOnLoad?(o.status.shouldPlayOnLoad=!1,o.options.autoplay=!1,o):(o.data.cachedTime="number"==typeof e?e:o.currentTime(),o.status.playing=!1,o.data.onendtimer&&window.clearTimeout(o.data.onendtimer),"function"==typeof o.data.source.stop?o.data.source.stop(0):"function"==typeof o.data.source.noteOff&&o.data.source.noteOff(0),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"trigger",this).call(this,"pause",o),o)}},{key:"currentTime",value:function(e){var t=this;return"number"==typeof e?(t.status.playing?t.pause(e).play():t.data.cachedTime=e,t):t.status.ready&&t.status.playing?t.data.source.context.currentTime-t.data.startTime||0:t.data.cachedTime||0}},{key:"formattedTime",value:function(e){var t=this;return e?y.default.timeFormat(t.currentTime())+"/"+y.default.timeFormat(t.duration()):y.default.timeFormat(t.currentTime())}},{key:"duration",value:function(){var e=this;return e.status.ready?e.data.source.buffer.duration||0:0}},{key:"volume",value:function(e){var t=this,o=t.node("GainNode");return"number"==typeof e?(e=y.default.normalize(e),t.status.muted?(t.data.gainCache=e,t.data.gain=0):t.data.gain=e,t.status.playing&&o&&o.gain(t.options.mix?t.data.gain*t.options.mix.volume():t.data.gain),t):(t.status.playing&&o&&(t.data.gain=o.gain()),t.data.gain)}},{key:"tweenVolume",value:function(e,t){var o=this;o.volumeTween&&window.cancelAnimationFrame(o.volumeTween);var n=o.node("GainNode");return n?(n.tweenGain(e,t),u.timeoutPromise(1e3*t)):new Promise(function(n,r){function a(){i<=0?(o.volume(c),n(o)):o.volumeTween=window.requestAnimationFrame(a),i-=1;var e=1-i/u,t=y.default.lerp(l,c,e);o.volume(t)}var u=Math.round(60*t),i=Math.round(60*t),l=o.volume(),c=y.default.normalize(e);a()})}},{key:"muted",value:function(e){var t=this;return"boolean"==typeof e?(!0===e?(t.data.gainCache=t.data.gain,t.volume(0),t.status.muted=!0):(t.status.muted=!1,t.volume(t.data.gainCache)),t):t.status.muted}},{key:"paused",value:function(){return!this.status.playing}},{key:"destroy",value:function(){this.pause()}}]),t}(p.default));e.exports=m},function(e,t,o){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),a=o(0),u=function(e){return e&&e.__esModule?e:{default:e}}(a),i=function(){function e(t){n(this,e),this.ctx=t.context,this.node=this.ctx.createGainNode?this.ctx.createGainNode():this.ctx.createGain(),this.gain("number"==typeof t.gain?t.gain:1)}return r(e,[{key:"gain",value:function(e){return"number"==typeof e&&this.node.gain.setTargetAtTime(u.default.normalize(e),this.ctx.currentTime,0),this.node.gain.value}},{key:"tweenGain",value:function(e,t){"function"==typeof this.node.gain.exponentialRampToValueAtTime&&(e=u.default.normalize(e),0===e&&(e=1e-6),this.node.gain.exponentialRampToValueAtTime(e,this.ctx.currentTime+t))}},{key:"muted",value:function(e){}}]),e}();t.default=i},function(e,t,o){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),a=function(){function e(t){n(this,e);var o=t.context;this.node=o.createPanner(),this.values={pan:0,panX:0,panY:0,panZ:0}}return r(e,[{key:"pan",value:function(e){if("string"==typeof e&&("front"===e?e=0:"back"===e?e=180:"left"===e?e=270:"right"===e&&(e=90)),"number"==typeof e){this.values.pan=e%360;var t=.017453292519943295*(90-e),o=this.values.panX=Math.cos(t),n=this.values.panY=Math.sin(t),r=this.values.panZ=-.5;this.node.setPosition(o,n,r)}return this.values.pan}},{key:"tweenPan",value:function(e,t){}}]),e}();t.default=a},function(e,t,o){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function e(t){n(this,e);var o=t.context;this.node=o.createPanner()};t.default=r},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,o=Array(e.length);t<e.length;t++)o[t]=e[t];return o}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),c=function e(t,o,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,o);if(void 0===r){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,o,n)}if("value"in r)return r.value;var u=r.get;if(void 0!==u)return u.call(n)},s=o(4),f=n(s),p=o(0),d=n(p),y=o(1),v=(n(y),function(e){function t(e){a(this,t);var o=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),n=o,i={id:"",src:"",volume:1,start:0,loop:!1,autoplay:!1,context:!1,mix:!1,nodes:[]};if(n.options=Object.assign(i,e),!n.options.context)throw new Error("Can’t create an ElementSourceTrack without Web Audio API support");if(!n.options.src)throw new Error("Can’t create an ElementSourceTrack without a src parameter");n.el=document.createElement("audio"),n.el.volume=n.options.volume,n.el.muted=n.options.muted,n.el.loop=n.options.loop,n.el.autoplay=n.options.autoplay,n.el.src=n.options.src,["loadstart","loadedmetadata","canplay","canplaythrough","play","pause","ended","timeupdate","seeking","seeked","error"].forEach(function(e){n.el.addEventListener(e,c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"trigger",o).bind(n,e,!1))}),n.data.source=n.options.context.createMediaElementSource(n.el);var l={type:"GainNode",options:{gain:n.data.gain}};return c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createNodes",o).call(o,[l].concat(r(n.options.nodes)),n.data.source),o}return i(t,e),l(t,[{key:"play",value:function(){return this.el.play(),this}},{key:"pause",value:function(){return this.el.pause(),this}},{key:"stop",value:function(){return this.el.pause(),this.el.currentTime=0,this}},{key:"currentTime",value:function(e){var t=this;return"number"==typeof e?(t.el.currentTime=e,t):t.el.currentTime}},{key:"duration",value:function(){return this.el.duration}},{key:"formattedTime",value:function(e){var t=this;return e?d.default.timeFormat(t.currentTime())+"/"+d.default.timeFormat(t.duration()):d.default.timeFormat(t.currentTime())}},{key:"volume",value:function(e){var t=this,o=t.node("GainNode");return"number"==typeof e?(e=d.default.normalize(e),e=t.options.mix?e*t.options.mix.volume():e,o&&o.gain(e),t.el.volume=e,t):t.el.volume}},{key:"tweenVolume",value:function(e,t){var o=this;return o.volumeTween&&window.cancelAnimationFrame(o.volumeTween),new Promise(function(n,r){function a(){i<=0?(o.volume(c),n(o)):o.volumeTween=window.requestAnimationFrame(a),i-=1;var e=1-i/u,t=d.default.lerp(l,c,e);o.volume(t)}var u=Math.round(60*t),i=Math.round(60*t),l=o.volume(),c=d.default.normalize(e);a()})}},{key:"muted",value:function(e){var t=this;return"boolean"==typeof e&&(t.el.muted=e),t.el.muted}},{key:"destroy",value:function(){this.pause()}},{key:"paused",value:function(){return this.el.paused}}]),t}(f.default));t.default=v}])});
//# sourceMappingURL=audioMixer.min.js.map